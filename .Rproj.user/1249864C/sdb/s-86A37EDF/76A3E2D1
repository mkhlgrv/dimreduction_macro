{
    "collab_server" : "",
    "contents" : "source(\"code/lib.R\")\nwbsources()[44,]\nwbstats::wbsearch(\"GDP per capita\")\nc(\"NY.GDP.PCAP.KD.ZG\",\"NY.GDP.PCAP.KD\")\ndata1 <- wb(indicator = c(\"NY.GDP.PCAP.KD.ZG\",\"NY.GDP.PCAP.KD\"),\n   startdate = 2012,\n   enddate = 2017,\n   freq = \"Y\")\ndata1.1 <- data1 %>%\n  select(\"iso3c\", \"country\", \"indicatorID\", \"date\", \"value\") %>%\n  as.data.table() %>%\n  dcast.data.table(iso3c + country + date~ indicatorID) %>%\n  group_by(iso3c, country) %>%\n  arrange(date) %>%\n  summarise(g = prod(NY.GDP.PCAP.KD.ZG/100+1)^(1/8) - 1,\n            G = log(NY.GDP.PCAP.KD[1]))\np1 <- ggplot(data = data1.1, aes(x = G, y = g)) +\n  scale_y_continuous(labels = scales::percent) +\n  xlab(\"GDP per capita, 2012\") +\n  ylab(TeX(\"Growth, $2012 \\U2013 2017$\")) +\n  geom_point()\nmodel1 <- lm(formula = g~G, data = data1.1)\nsummary(model1)\nmodel1$fitted.values\n\n\nstargazer(model1, model1, title=\"Regression Results\",\n          dep.var.labels=c(\"Overall Rating\",\"High Rating\"),\n          covariate.labels=c(\"Handling of Complaints\"),\n          omit.stat=c(\"LL\",\"ser\",\"f\"),\n          ci=TRUE,\n          ci.level=0.95,\n          single.row=TRUE)\np2 <- p1+geom_smooth(method = \"lm\")\np2\n#data2 ----\nind <- c(\"NY.GDP.PCAP.KD.ZG\",\n         \"NY.GDP.PCAP.KD\",\n         \n  \"NE.GDI.FPUB.ZS\", #Gross public investment (% of GDP)\n  \"SL.TLF.1564.IN\", #Labor force (15-24 years), total\n  \"SL.TLF.1524.IN\",  # Labor force, total\n  \"SP.POP.TOTL\", \n  \"SP.DYN.TFRT.IN\", # fertility\n  \"SH.DYN.MORT\", # infant mortality\n  \"SP.DYN.CDRT.IN\", # death rate\n  \"SP.DYN.CBRT.IN\", # birth rate\n  \"SP.DYN.LE00.IN\", # life expectancy at birth\n  \"GC.XPN.TOTL.GD.ZS\", # total government expense (% of GDP)\n  \"GB.BAL.OVRL.GDP.ZS\", # deficit or surplus\n  \"DT.DOD.DECT.CD\", # external debt currenct us dollars\n  \"PV.EST\", # political stability\n  \"VA.EST\", # voice\n  \"NE.EXP.GNFS.ZS\", #exp % of gdp\n  \"NE.IMP.GNFS.ZS\", # imp\n  \"AG.SRF.TOTL.K2\",\n\"FR.INR.RISK\",\n\"PA.NUS.FCRF\")\n\n\n\ndata2 <- wb(indicator = ind,\n            startdate = 2012, enddate = 2017, freq = \"Y\") %>%\n  dcast( iso3c+date ~ indicatorID, value.var = \"value\", fun.aggregate = max)\n\nCM <- cor(data2.wide)\nCM_old <- CM\n\n\ndata3 <-  data2 %>% \n  group_by(iso3c) %>%\n  arrange(date) %>%\n  summarise(g = prod(NY.GDP.PCAP.KD.ZG/100+1)^(1/6) - 1,\n            G = log(NY.GDP.PCAP.KD[1]),\n          Pop = log(SP.POP.TOTL[1]),        \n          FX = PA.NUS.FCRF[1],\n          Fert = SP.DYN.TFRT.IN[1],\n          IMR = SH.DYN.MORT[1],\n          DR = SP.DYN.CDRT.IN[1], # death rate\n          BR = SP.DYN.CBRT.IN[1], # birth rate\n          LE = SP.DYN.LE00.IN[1], # life expectancy at birth\n          GExp = GC.XPN.TOTL.GD.ZS[1], # total government expense (% of GDP)\n          Stab = PV.EST[1], # political stability\n          Voice = VA.EST[1], # voice\n          Ex = NE.EXP.GNFS.ZS[1], #exp % of gdp\n          Im = NE.IMP.GNFS.ZS[1], # imp\n          Area = AG.SRF.TOTL.K2[1]\n          ) %>%\n  na.omit()\nfor(i in 1:nrow(data3)) {\n  for(j in 1:ncol(data3)){\n    if(is.infinite(data3[i,j][[1]])){\n      data3[i,j] <- NA\n    }\n  }\n}\ndata3 <- na.omit(data3)\ndata3.x <- data3 %>% select(-c(g, iso3c)) %>% as.matrix()\n\ndata3.y <- data3 %>% pull(g) \n\nmodel2 <- cv.glmnet(x = data3.x, y= data3.y, standardize = F)\n\nbestlam <- model2$lambda.min\nlasso.coef  <- predict(model2, type = 'coefficients', s = 30)\nlasso.coef\n",
    "created" : 1543540186737.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2812542801",
    "id" : "76A3E2D1",
    "lastKnownWriteTime" : 1545706743,
    "last_content_update" : 1545706743514,
    "path" : "C:/mkhlgrv/hds_macro/code/importwb.R",
    "project_path" : "code/importwb.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}