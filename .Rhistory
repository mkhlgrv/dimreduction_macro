data.frame(File = word(readme_vars
[x]),
Colname_BL = (c(readme_vars
[x:length(readme_vars
)]) %>%
paste(collapse = " ") %>%
gsub(pattern = ".{1,}: {1,}", replacement = "", x = .) %>%
gsub(pattern = " {2,}", replacement = " ", x = .) %>%
gsub(pattern = "^ | $", replacement = "", x = .) %>%
strsplit(split = " ") %>%
unlist
)
)
}
}
file_colname <- imap_dfr(firstlines, get.names.BL)
View(file_colname)
# rm(list =ls())
BL <- environment()
suppressMessages(source("code/lib.R"))
BL$readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
rm(list =ls())
# rm(list =ls())
BL <- environment()
suppressMessages(source("code/lib.R"))
BL$readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
rm(list =ls())
# rm(list =ls())
BL <- environment()
suppressMessages(source("code/lib.R"))
BL$readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
str(BL)
ls(BL)
readme_vars
attr(readme_vars)
# rm(list =ls())
BL <- new.env()
BL$readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
rm(list =ls())
# rm(list =ls())
BL <- new.env()
suppressMessages(source("code/lib.R"))
BL$readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
View(BL)
# rm(list =ls())
suppressMessages(source("code/lib.R"))
readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
contain_prn <- which(grepl(".prn",readme_vars
))
rm(list =ls())
readme_var_list <- readLines("data/barrolee/readme.txt")[-c(1:716)]
contain_prn <- which(grepl(".prn",readme_var_list
))
rm(list =ls())
suppressMessages(source("code/lib.R"))
readme_var <- readLines("data/barrolee/readme.txt")[-c(1:716)]
contain_prn <- which(grepl(".prn",readme_var_list
))
countries <- readLines("data/barrolee/readme.txt")[c(565:702)] %>%
gsub(pattern = " {2,}", replacement = "  ", x = .) %>%
gsub(pattern = "^ ", replacement = "", x = .) %>%
strsplit(split = "  ") %>%
do.call(what = rbind, args = .) %>%
as.data.frame() %>%
set_names(c("SHCODE", "COUNTRY  NAME", "WBCTRY", "SMPL98", "SMPL97"))
rm(list =ls())
suppressMessages(source("code/lib.R"))
readme_vars <- readLines("data/barrolee/readme.txt")[-c(1:716)]
contain_prn <- which(grepl(".prn",readme_vars
))
countries <- readLines("data/barrolee/readme.txt")[c(565:702)] %>%
gsub(pattern = " {2,}", replacement = "  ", x = .) %>%
gsub(pattern = "^ ", replacement = "", x = .) %>%
strsplit(split = "  ") %>%
do.call(what = rbind, args = .) %>%
as.data.frame() %>%
set_names(c("SHCODE", "COUNTRY  NAME", "WBCTRY", "SMPL98", "SMPL97"))
get.names.BL <- function(x, i) {
if(!is.na(contain_prn[i+1])) {
data.frame(File = word(readme_vars
[x]),
Colname_BL = (c(readme_vars
[x:(contain_prn[i+1]-1)]) %>%
paste(collapse = " ") %>%
gsub(pattern = ".{1,}: {1,}", replacement = "", x = .) %>%
gsub(pattern = " {2,}", replacement = " ", x = .) %>%
gsub(pattern = "^ | $", replacement = "", x = .) %>%
strsplit(split = " ") %>%
unlist
)
)
} else {
data.frame(File = word(readme_vars
[x]),
Colname_BL = (c(readme_vars
[x:length(readme_vars
)]) %>%
paste(collapse = " ") %>%
gsub(pattern = ".{1,}: {1,}", replacement = "", x = .) %>%
gsub(pattern = " {2,}", replacement = " ", x = .) %>%
gsub(pattern = "^ | $", replacement = "", x = .) %>%
strsplit(split = " ") %>%
unlist
)
)
}
}
get.vars.BL <- function(x, i) {
if(!is.na(contain_prn[i+1])) {
data.frame(File = word(readme_vars
[x]),
Colname_BL = (c(readme_vars
[x:(contain_prn[i+1]-1)]) %>%
paste(collapse = " ") %>%
gsub(pattern = ".{1,}: {1,}", replacement = "", x = .) %>%
gsub(pattern = " {2,}", replacement = " ", x = .) %>%
gsub(pattern = "^ | $", replacement = "", x = .) %>%
strsplit(split = " ") %>%
unlist
)
)
} else {
data.frame(File = word(readme_vars
[x]),
Colname_BL = (c(readme_vars
[x:length(readme_vars
)]) %>%
paste(collapse = " ") %>%
gsub(pattern = ".{1,}: {1,}", replacement = "", x = .) %>%
gsub(pattern = " {2,}", replacement = " ", x = .) %>%
gsub(pattern = "^ | $", replacement = "", x = .) %>%
strsplit(split = " ") %>%
unlist
)
)
}
}
vars_BL <- imap_dfr(contain_prn, get.vars.BL)
set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname)
}
read.set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname)
}
BL <- names_BL %>%
split(.$File) %>%
map_dfc(read.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
BL <- vars_BL %>%
split(.$File) %>%
map_dfc(read.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
vars_BL <- imap_dfr(contain_prn, get.vars.BL)
read.set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname)
}
BL <- vars_BL %>%
split(.$File) %>%
map_dfc(read.set.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
BL
str(BL)
which(names(BL) == "grsh56a")
# t()
colnames(BL)
vars_BL <- imap_dfr(contain_prn, get.vars.BL) %>%
bind_cols(Colname_unique = NA, Type = NA, Period = NA)
vars_BL <- imap_dfr(contain_prn, get.vars.BL) %>%
mutate(Colname_unique = NA,
Type = NA,
Period = NA)
which(vars_BL$Colname_BL == "grsh56a")
row1 <- which(vars_BL$Colname_BL == "grsh56a")
row1
vars_BL <- imap_dfr(contain_prn, get.vars.BL) %>%
mutate(Colname_correct = Colname_BL)
which(file_colname$Colname_BL=="bmp2ml")
which(vars_BL$Colname_BL=="bmp2ml")
names(vars_BL)
vars_BL$Colname_BL
which(vars_BL$Colname_BL=="bmp2l")
vars_BL <- imap_dfr(contain_prn, get.vars.BL) %>%
mutate(Colname_correct = Colname_BL)
vars_BL$Colname_correct[which(vars_BL$Colname_BL=="grsh56a")] <- "grsh57"
vars_BL$Colname_correct[which(vars_BL$Colname_BL=="bmp2ml")] <- "bmp2l"
vars_BL
vars_BL$Colname_BL %>%
select(matches("[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5"),
-durs1)
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5&&!durs1", x = .)
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5&&!durs1", x = ., value = TRUE)
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE)
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% sort()
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5&&!durs1", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5&!durs1", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="[[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5]&!durs1", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="([a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5)&!durs1", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="(?=.*[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5)(?!durs1)", x = ., value = TRUE) %>% sort() %>% length
ars_BL$Colname_BL %>%
grep(pattern ="([a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5)(?!durs1)", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="([a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5)(?!durs1)", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% sort() %>% length
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% .[-grep(pattern = "durs1")]
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)]
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)] %>% length
vars_BL$Colname_BL %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5|bmp[0-9]{1}l", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)]
vars_BL$Colname_correct %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5|bmp[0-9]{1}l", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)]
vars_BL$Colname_correct[grep("bmp[0-9]{1}l", vars_BL$Colname_correct)]
vars_BL$Colname_correct[grep("bmp[0-9]{1}l", vars_BL$Colname_correct)] <- paste0("bmpl", c(1:6))
vars_BL
vars_BL %>% View
vars_BL$Colname_correct %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)]
vars_BL$Colname_BL  %>%
grep(pattern = "[a-z][0-9]{2}$|gdpsh5|gdpsh4|pop15|pop65|lifee0|pysh5|pcsh5|pish5|pgsh5", x = ., value = TRUE) %>%
.[-grep("grsh5|invsh5|invsh4|grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5|smpl97", x = .)] %>% length
vars_BL$Colname_correct  %>%
grep(pattern = "[a-z][0-9]{2}$|gdpsh5|gdpsh4|pop15|pop65|lifee0|pysh5|pcsh5|pish5|pgsh5", x = ., value = TRUE) %>%
.[-grep("grsh5|invsh5|invsh4|grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5|smpl97", x = .)]
#type x
vars_1 <- vars_BL$Colname_correct %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)]
# type xx
vars_2 <- vars_BL$Colname_correct  %>%
grep(pattern = "[a-z][0-9]{2}$|gdpsh5|gdpsh4|pop15|pop65|lifee0|pysh5|pcsh5|pish5|pgsh5", x = ., value = TRUE) %>%
.[-grep("grsh5|invsh5|invsh4|grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5|smpl97", x = .)]
#type x
vars1 <- vars_BL$Colname_correct %>%
grep(pattern ="[a-z][0-9]{1}$|grsh5|invsh5|invsh4|
grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5", x = ., value = TRUE) %>% .[-grep(pattern = "durs1", x = .)]
# type xx
vars2 <- vars_BL$Colname_correct  %>%
grep(pattern = "[a-z][0-9]{2}$|gdpsh5|gdpsh4|pop15|pop65|lifee0|pysh5|pcsh5|pish5|pgsh5", x = ., value = TRUE) %>%
.[-grep("grsh5|invsh5|invsh4|grsh4|govsh4|govsh5|gvxdxe4|gvxdxe5|smpl97", x = .)]
vars0 <- vars_BL$Colname_correct %>% .[-which(vars_BL$Colname_correct %in% c(vars1, vars2))]
vars0
length(vars0) +length(vars1) +length(vars2)
vars2[which(vars2 %in% vars1)]
vars1[which(vars1 %in% vars2)]
vars_BL %>% mutate(Type = ifelse(Colname_correct %in% vars0,
0,
ifelse(Colname_correct %in% vars1,
1, ifelse(Colname_correct %in% vars2, 2)))) %>%
mutate(Colname_unique = ifelse(Type == 0,
Colname_correct,
ifelse(Type == 1,
substr(Colname_correct, 1, nchar(Colname_correct) - 1)),
ifelse(Type == 2,
substr(Colname_correct, 1, nchar(Colname_correct) - 2))),
Period = ifelse(Type == 0,
"",
ifelse(Type == 1,
substr(Colname_correct, nchar(Colname_correct) - 1, nchar(Colname_correct))),
ifelse(Type == 2,
substr(Colname_correct, nchar(Colname_correct) - 2, nchar(Colname_correct)))),
Colname_wide = paste(Colname_unique, Type, Period, sep = "_"))
vars_BL %>% mutate(Type = ifelse(Colname_correct %in% vars0,
0,
ifelse(Colname_correct %in% vars1,
1, ifelse(Colname_correct %in% vars2, 2)))) %>%
mutate(Colname_unique = ifelse(Type == 0,
Colname_correct,
ifelse(Type == 1,
substr(Colname_correct, 1, nchar(Colname_correct) - 1)),
ifelse(Type == 2,
substr(Colname_correct, 1, nchar(Colname_correct) - 2))),
Period = ifelse(Type == 0,
"",
ifelse(Type == 1,
substr(Colname_correct, nchar(Colname_correct) - 1, nchar(Colname_correct))),
ifelse(Type == 2,
substr(Colname_correct, nchar(Colname_correct) - 2, nchar(Colname_correct)))))
vars_BL %>% mutate(Type = ifelse(Colname_correct %in% vars0,
0,
ifelse(Colname_correct %in% vars1,
1,
ifelse(Colname_correct %in% vars2,
2,
NA)))) %>%
mutate(Colname_unique = ifelse(Type == 0,
Colname_correct,
ifelse(Type == 1,
substr(Colname_correct, 1, nchar(Colname_correct) - 1),
ifelse(Type == 2,
substr(Colname_correct, 1, nchar(Colname_correct) - 2)))),
Period = ifelse(Type == 0,
"",
ifelse(Type == 1,
substr(Colname_correct, nchar(Colname_correct) - 1, nchar(Colname_correct)),
ifelse(Type == 2,
substr(Colname_correct, nchar(Colname_correct) - 2, nchar(Colname_correct)),
NA))),
Colname_wide = paste(Colname_unique, Type, Period, sep = "_"))
vars_BL %>% mutate(Type = ifelse(Colname_correct %in% vars0,
0,
ifelse(Colname_correct %in% vars1,
1,
ifelse(Colname_correct %in% vars2,
2,
NA)))) %>%
mutate(Colname_unique = ifelse(Type == 0,
Colname_correct,
ifelse(Type == 1,
substr(Colname_correct, 1, nchar(Colname_correct) - 1),
ifelse(Type == 2,
substr(Colname_correct, 1, nchar(Colname_correct) - 2),NA))),
Period = ifelse(Type == 0,
"",
ifelse(Type == 1,
substr(Colname_correct, nchar(Colname_correct) - 1, nchar(Colname_correct)),
ifelse(Type == 2,
substr(Colname_correct, nchar(Colname_correct) - 2, nchar(Colname_correct)),
NA))),
Colname_wide = paste(Colname_unique, Type, Period, sep = "_"))
vars_BL %>% mutate(Type = ifelse(Colname_correct %in% vars0,
0,
ifelse(Colname_correct %in% vars1,
1,
ifelse(Colname_correct %in% vars2,
2,
NA)))) %>%
mutate(Colname_unique = ifelse(Type == 0,
Colname_correct,
ifelse(Type == 1,
substr(Colname_correct, 1, nchar(Colname_correct) - 1),
ifelse(Type == 2,
substr(Colname_correct, 1, nchar(Colname_correct) - 2),NA))),
Period = ifelse(Type == 0,
"",
ifelse(Type == 1,
substring(Colname_correct, nchar(Colname_correct)),
ifelse(Type == 2,
substring(Colname_correct, nchar(Colname_correct) - 1),
NA))),
Colname_wide = paste(Colname_unique, Type, Period, sep = "_"))
read.set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname)
}
BL <- vars_BL %>%
split(.$File) %>%
map_dfc(read.set.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
# t()
colnames(BL)
read.set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname_wide)
}
BL <- vars_BL %>%
split(.$File) %>%
map_dfc(read.set.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
# t()
colnames(BL)
read.set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname_wide)
}
BL <- vars_BL %>%
split(.$File) %>%
map_dfc(read.set.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
# t()
colnames(BL)
vars_BL
vars_BL <- vars_BL %>% mutate(Type = ifelse(Colname_correct %in% vars0,
0,
ifelse(Colname_correct %in% vars1,
1,
ifelse(Colname_correct %in% vars2,
2,
NA)))) %>%
mutate(Colname_unique = ifelse(Type == 0,
Colname_correct,
ifelse(Type == 1,
substr(Colname_correct, 1, nchar(Colname_correct) - 1),
ifelse(Type == 2,
substr(Colname_correct, 1, nchar(Colname_correct) - 2),NA))),
Period = ifelse(Type == 0,
"",
ifelse(Type == 1,
substring(Colname_correct, nchar(Colname_correct)),
ifelse(Type == 2,
substring(Colname_correct, nchar(Colname_correct) - 1),
NA))),
Colname_wide = paste(Colname_unique, Type, Period, sep = "_"))
read.set.names.BL <- function(x){
read.table(paste0("data/barrolee/",x$File[1])) %>%
purrr::set_names(x$Colname_wide)
}
BL <- vars_BL %>%
split(.$File) %>%
map_dfc(read.set.names.BL) %>%
set_rownames(countries$WBCTRY) #%>%
# t()
colnames(BL)
vars_BL %>% filter(Type = 0 | (Type = 1&Period = 1)|(Type = 2& Period = 65))
vars_BL %>% filter(Type == 0 | (Type == 1&Period == 1) | (Type == 2 & Period == 65))
vars_BL %>% filter(Type == 0 | (Type == 1&Period == 1) | (Type == 2 & Period == 65)) %>% pull(Colname_wide)
BL[vars_65]
BL[[vars_65]]
vars_65 <- vars_BL %>% filter(Type == 0 | (Type == 1&Period == 1) | (Type == 2 & Period == 65)) %>% pull(Colname_wide)
BL[[vars_65]]
BL[vars_65]
vars_65 %>% View
BL %>% select(matches(vars65), - gdpsh4_2_65)
BL %>% select(matches(vars_65), - gdpsh4_2_65)
BL %>% select(vars_65, - gdpsh4_2_65)
BL %>% select(vars_65, - gdpsh4_2_65) %>% dim
BL %>% select(vars_65) %>% dim
X <- BL %>% select(vars_65, - gdpsh4_2_65) %>% dim
Y <- BL %>% pull(gdpsh4_2_65)
Y
X <- BL %>% select(vars_65) %>% na.omit %>% select(-gdpsh4_2_65) %>% dim
X
X <- BL %>% select(vars_65) %>% na.omit %>% select(-gdpsh4_2_65)
X
X <- BL %>% select(vars_65) %>%
X <- BL %>% select(vars_65)
X
X %>% View
X[is.na(X)]
is.na(X)
colSums(is.na(X))
colSums(is.na(X)) %>% View
vars_65 <- vars_BL %>% filter(Type == 0 | (Type == 1&Period == 1) | (Type == 2 & Period == 65)) %>% pull(Colname_wide)
X <- BL %>% select(vars_65) #%>% na.omit %>% select(-gdpsh4_2_65)
Y <- BL %>% pull(gdpsh4_2_65)
X <- X[!is.na(Y)]
vars_65 <- vars_BL %>% filter(Type == 0 | (Type == 1&Period == 1) | (Type == 2 & Period == 65)) %>% pull(Colname_wide)
X <- BL %>% select(vars_65) #%>% na.omit %>% select(-gdpsh4_2_65)
Y <- BL %>% pull(gdpsh4_2_65)
X <- X[!is.na(Y),]
Y <- Y[!is.na(Y)]
for(i in 1:ncol(X)){
X[,i][is.na(X[,i])] <- mean(X[,i], na.rm = TRUE)
}
X <- as.matrix(X)
glmnet(X)
glmnet(X,y)
glmnet(X,Y)
model1 <- glmnet(X,Y)
summary(model1)
model1$beta
model1$a0
model1$dim
model1$lambda
print(model1)
coef(model1, s = 0.01)
vars_65 <- vars_BL %>% filter(Type == 0 | (Type == 1&Period == 1) | (Type == 2 & Period == 65)) %>% pull(Colname_wide)
X <- BL %>% select(vars_65,-gdpsh4_2_65)
Y <- BL %>% pull(gdpsh4_2_65)
X <- X[!is.na(Y),]
Y <- Y[!is.na(Y)]
for(i in 1:ncol(X)){
X[,i][is.na(X[,i])] <- mean(X[,i], na.rm = TRUE)
}
X <- as.matrix(X)
model1 <- glmnet(X,Y)
summary(model1)
coef(model1, s = 0.01)
coef(model1, s = 0.001)
coef(model1, s = 0.1)
coef(model1, s = 1)
model1 <- glmnet(X,Y, family = "Cox")
model1 <- glmnet(X,Y, family = "cox")
model1 <- glmnet(X,Y, family = "multinomial")
model1 <- glmnet(X,Y, family = "gaussian")
model1
